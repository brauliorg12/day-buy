!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var t=0;t<o.length;t++){var c=o[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{azia:function(t,c,n){"use strict";n.r(c),n.d(c,"ProdcutoAddPageModule",(function(){return _e}));var i=n("ofXK"),r=n("3Pt+"),a=n("tyNb"),s=n("TEn/"),l=n("mrSG"),u=n("wd/R"),f=n("fXoL"),p=n("GPUG"),d=n("on2l"),m=n("hwGQ"),g=n("FAH8"),h=n("e8h1"),_=n("5egi"),b=n("tk/3"),v=n("riPR"),k=["input_desc"],x=["input_toggle"],M=["input_promo"],F=["input_precio"],C=["input_precio_con"],y=["input_fecha"],P=["input_mp"],O=["input_t"],I=["input_s"];function w(e,o){1&e&&(f.dc(0,"ion-content"),f.dc(1,"ion-row",6),f.Yb(2,"ion-spinner",7),f.cc(),f.cc())}function L(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1,"*"),f.cc())}function Y(e,o){1&e&&f.Yb(0,"ion-icon",47)}function K(e,o){1&e&&(f.dc(0,"ion-text",48),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0M\xednimo 5 caracteres "),f.cc())}function z(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1,"*"),f.cc())}function D(e,o){1&e&&f.Yb(0,"ion-icon",47)}function V(e,o){1&e&&(f.dc(0,"ion-text",48),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0M\xednimo 10 caracteres "),f.cc())}function S(e,o){1&e&&(f.dc(0,"ion-text",50),f.Lc(1," (* m\xednimo una) "),f.cc())}function R(e,o){1&e&&f.Yb(0,"ion-icon",47)}function X(e,o){if(1&e&&(f.dc(0,"ion-select-option",51),f.Lc(1),f.cc()),2&e){var t=o.$implicit;f.vc("value",t),f.Mb(1),f.Mc(t)}}function T(e,o){1&e&&(f.dc(0,"ion-text",50),f.Lc(1," * "),f.cc())}function j(e,o){1&e&&f.Yb(0,"ion-icon",47)}function U(e,o){1&e&&(f.dc(0,"ion-button",52),f.Yb(1,"ion-icon",53),f.Lc(2," A\xf1adir + "),f.cc())}function E(e,o){if(1&e){var t=f.ec();f.dc(0,"ion-button",54),f.lc("click",(function(){return f.Dc(t),f.pc(),f.Ac(51).click()}))("click",(function(e){return f.Dc(t),f.pc(2).fileUpl(e.target.files)})),f.Yb(1,"ion-icon",53),f.Lc(2," Cambiar "),f.cc()}}function A(e,o){if(1&e&&(f.dc(0,"ion-col",55),f.dc(1,"ion-thumbnail",56),f.Yb(2,"ion-img",57),f.cc(),f.cc()),2&e){var t=f.pc(2);f.Mb(2),f.uc("src",t.photoSelected)}}function B(e,o){1&e&&f.Yb(0,"div",58)}function N(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1," *"),f.cc())}function G(e,o){1&e&&f.Yb(0,"ion-icon",47)}function q(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Solo n\xfameros. "),f.cc())}function $(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Ingrese el precio real. "),f.cc())}function H(e,o){if(1&e){var t=f.ec();f.dc(0,"ion-card"),f.dc(1,"ion-list",10),f.dc(2,"ion-label",35),f.dc(3,"b"),f.Lc(4,"Precio: "),f.cc(),f.Kc(5,N,2,0,"ion-text",12),f.Kc(6,G,1,0,"ion-icon",13),f.cc(),f.cc(),f.dc(7,"ion-item"),f.dc(8,"ion-label"),f.Yb(9,"ion-icon",59),f.cc(),f.dc(10,"ion-input",60,61),f.lc("ionChange",(function(){return f.Dc(t),f.pc(2).check_precio()})),f.cc(),f.cc(),f.Kc(12,q,4,0,"ion-text",42),f.Kc(13,$,4,0,"ion-text",42),f.cc()}if(2&e){var c=f.pc(2);f.Mb(2),f.uc("ngClass",c.promo),f.Mb(3),f.uc("ngIf",!c.offerForm.get("precio_final").valid),f.Mb(1),f.uc("ngIf",c.offerForm.get("precio_final").valid&&c.offerForm.get("precio_valid").valid),f.Mb(6),f.uc("ngIf",c.offerForm.get("precio_final").errors&&(c.offerForm.get("precio_final").dirty||c.offerForm.get("precio_final").touched)),f.Mb(1),f.uc("ngIf",null===c.offerForm.get("precio_valid").value)}}function J(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1," *"),f.cc())}function Q(e,o){1&e&&f.Yb(0,"ion-icon",47)}function W(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Solo n\xfameros. "),f.cc())}function Z(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Ingrese el precio real. "),f.cc())}function ee(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1," *"),f.cc())}function oe(e,o){1&e&&f.Yb(0,"ion-icon",47)}function te(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Solo n\xfameros. "),f.cc())}function ce(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Mayor a 20. "),f.cc())}function ne(e,o){if(1&e){var t=f.ec();f.bc(0),f.dc(1,"ion-card"),f.dc(2,"ion-list",10),f.dc(3,"ion-label",35),f.dc(4,"b"),f.Lc(5,"Precio: "),f.cc(),f.Kc(6,J,2,0,"ion-text",12),f.Kc(7,Q,1,0,"ion-icon",13),f.cc(),f.cc(),f.dc(8,"ion-item"),f.dc(9,"ion-label"),f.Yb(10,"ion-icon",59),f.cc(),f.dc(11,"ion-input",63,64),f.lc("ionChange",(function(){return f.Dc(t),f.pc(2).check_precio_con_oferta()})),f.cc(),f.cc(),f.Kc(13,W,4,0,"ion-text",42),f.Kc(14,Z,4,0,"ion-text",42),f.cc(),f.dc(15,"ion-card"),f.dc(16,"ion-list",10),f.dc(17,"ion-label",11),f.dc(18,"b"),f.Lc(19,"Precio de oferta en CoDi: "),f.cc(),f.Kc(20,ee,2,0,"ion-text",12),f.Kc(21,oe,1,0,"ion-icon",13),f.cc(),f.cc(),f.dc(22,"ion-item"),f.dc(23,"ion-label"),f.Yb(24,"ion-icon",59),f.cc(),f.dc(25,"ion-input",60,65),f.lc("ionChange",(function(){return f.Dc(t),f.pc(2).check_precio_oferta()})),f.cc(),f.dc(27,"ion-icon",66),f.lc("click",(function(){return f.Dc(t),f.pc(2).close()})),f.cc(),f.cc(),f.Kc(28,te,4,0,"ion-text",42),f.Kc(29,ce,4,0,"ion-text",42),f.cc(),f.ac()}if(2&e){var c=f.pc(2);f.Mb(3),f.uc("ngClass",c.promo),f.Mb(3),f.uc("ngIf",!c.offerForm.get("precio_inicial").valid||!c.offerForm.get("precio_valid2").valid),f.Mb(1),f.uc("ngIf",c.offerForm.get("precio_inicial").valid&&c.offerForm.get("precio_valid2").valid),f.Mb(6),f.uc("ngIf",c.offerForm.get("precio_inicial").errors&&(c.offerForm.get("precio_inicial").dirty||c.offerForm.get("precio_inicial").touched)),f.Mb(1),f.uc("ngIf",null===c.offerForm.get("precio_valid2").value),f.Mb(6),f.uc("ngIf",!c.offerForm.get("precio_final").valid),f.Mb(1),f.uc("ngIf",c.offerForm.get("precio_final").valid&&c.offerForm.get("precio_oferta").valid),f.Mb(7),f.uc("ngIf",c.offerForm.get("precio_final").errors&&(c.offerForm.get("precio_final").dirty||c.offerForm.get("precio_final").touched)),f.Mb(1),f.uc("ngIf",null===c.offerForm.get("precio_oferta").value)}}function ie(e,o){1&e&&(f.dc(0,"ion-text",46),f.Lc(1," * "),f.cc())}function re(e,o){1&e&&f.Yb(0,"ion-icon",47)}function ae(e,o){if(1&e){var t=f.ec();f.dc(0,"div",39),f.Yb(1,"ion-ripple-effect",40),f.dc(2,"ion-icon",67),f.lc("click",(function(){return f.Dc(t),f.pc(2).decrement()})),f.cc(),f.cc()}}function se(e,o){1&e&&(f.dc(0,"div"),f.Yb(1,"ion-icon",68),f.cc())}function le(e,o){1&e&&(f.dc(0,"ion-text",48),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0S\xf3lo n\xfameros "),f.cc())}function ue(e,o){1&e&&(f.dc(0,"ion-text",62),f.Lc(1,"\xa0 "),f.Yb(2,"ion-icon",49),f.Lc(3,"\xa0Mayor a 0. "),f.cc())}function fe(e,o){if(1&e){var t=f.ec();f.dc(0,"ion-button",69),f.lc("click",(function(){return f.Dc(t),f.pc(2).createOffer()})),f.dc(1,"div",70),f.dc(2,"ion-text",71),f.dc(3,"b"),f.Lc(4,"Publicar"),f.cc(),f.cc(),f.cc(),f.cc()}}function pe(e,o){if(1&e){var t=f.ec();f.dc(0,"ion-button",69),f.lc("click",(function(){return f.Dc(t),f.pc(2).pub_incompleta()})),f.dc(1,"div",70),f.dc(2,"ion-text",71),f.dc(3,"b"),f.Lc(4,"Publicar"),f.cc(),f.cc(),f.cc(),f.cc()}}function de(e,o){if(1&e){var t=f.ec();f.dc(0,"ion-content"),f.dc(1,"form",8),f.dc(2,"ion-grid"),f.dc(3,"ion-row"),f.dc(4,"ion-col",9),f.dc(5,"ion-card"),f.dc(6,"ion-list",10),f.dc(7,"ion-label",11),f.dc(8,"b"),f.Lc(9,"Nombre / T\xedtulo: "),f.Kc(10,L,2,0,"ion-text",12),f.Kc(11,Y,1,0,"ion-icon",13),f.cc(),f.cc(),f.cc(),f.dc(12,"ion-item"),f.Yb(13,"ion-icon",14),f.Lc(14,"\xa0\xa0\xa0 "),f.Yb(15,"ion-input",15,16),f.cc(),f.Kc(17,K,4,0,"ion-text",17),f.cc(),f.dc(18,"ion-card"),f.dc(19,"ion-list",10),f.dc(20,"ion-label",11),f.dc(21,"b"),f.Lc(22,"Descripci\xf3n: "),f.Kc(23,z,2,0,"ion-text",12),f.Kc(24,D,1,0,"ion-icon",13),f.cc(),f.cc(),f.cc(),f.dc(25,"ion-item"),f.Yb(26,"ion-icon",18),f.Lc(27,"\xa0\xa0\xa0 "),f.Yb(28,"ion-textarea",19,20),f.cc(),f.Kc(30,V,4,0,"ion-text",17),f.cc(),f.dc(31,"ion-card"),f.dc(32,"ion-item",21),f.dc(33,"ion-label",22),f.Lc(34,"Categor\xedas: "),f.Kc(35,S,2,0,"ion-text",23),f.Kc(36,R,1,0,"ion-icon",13),f.cc(),f.dc(37,"ion-select",24),f.Kc(38,X,2,2,"ion-select-option",25),f.cc(),f.cc(),f.cc(),f.Yb(39,"span",26),f.dc(40,"ion-card"),f.dc(41,"ion-list",10),f.dc(42,"ion-label",11),f.dc(43,"b"),f.Lc(44,"Im\xe1gen principal:"),f.cc(),f.Kc(45,T,2,0,"ion-text",23),f.Kc(46,j,1,0,"ion-icon",13),f.cc(),f.cc(),f.dc(47,"ion-grid"),f.dc(48,"ion-row"),f.dc(49,"ion-col",27),f.dc(50,"input",28,29),f.lc("change",(function(e){return f.Dc(t),f.pc().fileUpl(e.target.files)})),f.cc(),f.Kc(52,U,3,0,"ion-button",30),f.Kc(53,E,3,0,"ion-button",31),f.cc(),f.Kc(54,A,3,1,"ion-col",32),f.cc(),f.cc(),f.Kc(55,B,1,0,"div",33),f.cc(),f.Kc(56,H,14,5,"ion-card",5),f.Kc(57,ne,30,9,"ng-container",5),f.dc(58,"ion-card",34),f.dc(59,"ion-list",10),f.dc(60,"ion-label",35),f.dc(61,"b"),f.Lc(62,"Stock disponible: "),f.cc(),f.Kc(63,ie,2,0,"ion-text",12),f.Kc(64,re,1,0,"ion-icon",13),f.cc(),f.cc(),f.dc(65,"ion-item"),f.Kc(66,ae,3,0,"div",36),f.Kc(67,se,2,0,"div",5),f.dc(68,"ion-input",37,38),f.lc("ionChange",(function(){return f.Dc(t),f.pc().check_stock()})),f.cc(),f.dc(70,"div",39),f.Yb(71,"ion-ripple-effect",40),f.dc(72,"ion-icon",41),f.lc("click",(function(){return f.Dc(t),f.pc().increment()})),f.cc(),f.cc(),f.cc(),f.Kc(73,le,4,0,"ion-text",17),f.Kc(74,ue,4,0,"ion-text",42),f.cc(),f.dc(75,"ion-card"),f.dc(76,"ion-list",10),f.dc(77,"ion-label",11),f.dc(78,"b"),f.Lc(79,"Palabras clave: "),f.cc(),f.Lc(80,"(opcional) "),f.cc(),f.cc(),f.dc(81,"ion-item"),f.Yb(82,"ion-icon",43),f.Lc(83,"\xa0\xa0\xa0 "),f.Yb(84,"ion-textarea",44),f.cc(),f.cc(),f.Yb(85,"br"),f.Yb(86,"br"),f.Yb(87,"br"),f.Kc(88,fe,5,0,"ion-button",45),f.Kc(89,pe,5,0,"ion-button",45),f.cc(),f.cc(),f.cc(),f.cc(),f.cc()}if(2&e){var c=f.Ac(51),n=f.pc();f.Mb(1),f.uc("formGroup",n.offerForm),f.Mb(9),f.uc("ngIf",!n.offerForm.get("nombre").valid),f.Mb(1),f.uc("ngIf",n.offerForm.get("nombre").valid),f.Mb(6),f.uc("ngIf",n.offerForm.get("nombre").errors&&(n.offerForm.get("nombre").dirty||n.offerForm.get("nombre").touched)),f.Mb(6),f.uc("ngIf",!n.offerForm.get("descripcion").valid),f.Mb(1),f.uc("ngIf",n.offerForm.get("descripcion").valid),f.Mb(6),f.uc("ngIf",n.offerForm.get("descripcion").errors&&(n.offerForm.get("descripcion").dirty||n.offerForm.get("descripcion").touched)),f.Mb(5),f.uc("ngIf",!n.offerForm.get("categoria").valid),f.Mb(1),f.uc("ngIf",n.offerForm.get("categoria").valid),f.Mb(1),f.uc("interfaceOptions",n.customAlertOptionsBussines),f.Mb(1),f.uc("ngForOf",n.cats),f.Mb(7),f.uc("ngIf",!n.offerForm.get("img").valid),f.Mb(1),f.uc("ngIf",n.offerForm.get("img").valid),f.Mb(6),f.uc("ngIf",!c.value),f.Mb(1),f.uc("ngIf",c.value),f.Mb(1),f.uc("ngIf",n.photoSelected),f.Mb(1),f.uc("ngIf",!n.photoSelected),f.Mb(1),f.uc("ngIf",!1===n.pesos),f.Mb(1),f.uc("ngIf",!0===n.pesos),f.Mb(3),f.uc("ngClass",n.promo),f.Mb(3),f.uc("ngIf",!n.offerForm.get("stock").valid),f.Mb(1),f.uc("ngIf",n.offerForm.get("stock").valid&&n.offerForm.get("stock_valid").valid),f.Mb(2),f.uc("ngIf",n.offerForm.get("stock").value>1),f.Mb(1),f.uc("ngIf",n.offerForm.get("stock").value<=1),f.Mb(6),f.uc("ngIf",!n.offerForm.get("stock").valid),f.Mb(1),f.uc("ngIf",null===n.offerForm.get("stock_valid").value),f.Mb(14),f.uc("ngIf",n.offerForm.valid),f.Mb(1),f.uc("ngIf",!n.offerForm.valid)}}var me,ge,he=[{path:"",component:(me=function(){function t(o,c,n,i,a,s,l,f,p,d,m,g,h,_,b,v,k){var x=this;e(this,t),this.productoService=o,this.usuarioService=c,this.crop=n,this.file=i,this.platform=a,this.router=s,this.route=l,this.storage=f,this.actionSheetController=p,this.formBuilder=d,this.uiService=m,this.popoverController=g,this.modalController=h,this.loadingController=_,this.http=b,this.alertController=v,this.refreshEvent=k,this.commerce={},this.usuario={},this.foto=null,this.croppedImage="",this.image={croppedImage:""},this.today=u(new Date).format("YYYY-MM-DD"),this.status="loading",this.promo="",this.porciento="",this.fecha_c="",this.com="",this.stock=1,this.examples=!0,this.pesos=!1,this.analytics={channel:"facebook",feature:"onboarding",campaign:"content 123 launch",stage:"new user",tags:["one","two","three"]},this.properties={$desktop_url:"https://codiapp.com.ar",$android_url:"https://play.google.com/store/apps/details?id=com.codi.cubanova",$ios_url:"https://codiapp.com.ar",$ipad_url:"https://codiapp.com.ar",$deeplink_path:"",$match_duration:2e3,custom_string:"data",custom_integer:Date.now(),custom_boolean:!0},this.PrimerDato={canonicalIdentifier:"producto/123",canonicalUrl:"https://codiapp.com.ar",title:"CODI",contentDescription:"Content 123 Description "+Date.now(),contentImageUrl:"http://vps-1663776-x.dattaweb.com/uploads/codiapp.png",price:12.12,currency:"GBD",contentIndexingMode:"private",contentMetadata:{custom:"data",testing:123,this_is:!0}},this.branchUniversalObj=null,this.customAlertOptionsBussines={header:"Categor\xedas",subHeader:"Seleccione una o m\xe1s categor\xedas para su publicaci\xf3n.",translucent:!0},this.cats=["Hogar","Salud y Belleza","Estilo de vida","Otros"],this.avanzada=!1,this.cropOptions={quality:50},this.croppedImagepath="",this.isLoading=!1,this.status_2="loading",this.transfers={id:""},this.offerForm=this.formBuilder.group({_id:[""],nombre:new r.c("",r.s.compose([r.s.minLength(5),r.s.required])),img:["",r.s.required],img_2:[""],img_3:[""],img_4:[""],img_5:[""],img_6:[""],img_7:[""],img_8:[""],img_9:[""],img_10:[""],descripcion:new r.c("",r.s.compose([r.s.minLength(10),r.s.required])),moneda:[""],precio_final:["",r.s.required],stock:[1,r.s.required],costo_financiero:[""],costo_producto:[""],moneda_envio:[""],costo_envio:[""],costo_total:[""],margen:[""],categoria:["",r.s.required],notas:[""],etiquetas:[""],stock_valid:[""],promo:[""],porciento:null,visitas:[0],shares:[0],premium:["false"],status:["true"],precio_valid:[""],precio_valid2:[""],precio_oferta:[""],precio_inicial:[""],oferta:["false"],tipo:["producto"],condicion:["nuevo"],garantia:["no"],entrega:[""],pagos:[""],transfer:[null],link_mp:[""],check_e:[!1],check_t:[!1],check_m:[!1],valid_transfer:[""],valid_mp:[""],check_local:[!1],check_delivery:[!1],check_envio:[!1],tags:[""],commerce_id:[""],location:[""],province:[""]}),this.refreshEvent.currentData.subscribe((function(e){var o=new FileReader;o.onload=function(e){return x.photoSelected=o.result},o.readAsDataURL(x.croppedImage)})),this.refreshEvent.nuevoEventPub.subscribe((function(e){e[0]&&(x.offerForm.patchValue({transfer:e[0],valid_transfer:["ok"]}),x.status_2="ok",x.id_transfer=e[0]._id,x.scrollTo())}))}var c,n,i;return c=t,(n=[{key:"presentToast",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiService.toastGeneral("Publicaci\xf3n creada correctamente");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"pub_incompleta",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiService.alertaInformativa("Faltan datos, volv\xe9 a revisar el formulario. (los campos con aster\xedsco (*) son obligatorios)");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ionViewWillEnter",value:function(){this.status="ok"}},{key:"ngOnInit",value:function(){this.usuario=this.usuarioService.getUsuario()}},{key:"cambiarVista",value:function(){this.avanzada=!this.avanzada}},{key:"check_precio_oferta",value:function(){this.offerForm.patchValue(this.inputPromo.value<=20?{precio_oferta:null}:{precio_oferta:0,precio_valid:0})}},{key:"check_precio_con_oferta",value:function(){this.offerForm.patchValue(this.inputPrecioO.value<=20?{precio_valid2:null}:{precio_valid2:0,precio_valid:0})}},{key:"fileUpl",value:function(e){var o=this,t=new FileReader;t.onload=function(e){return o.photoSelected=t.result},t.readAsDataURL(e[0]),this.croppedImage=e.item(0),this.offerForm.patchValue({img:e.item(0)})}},{key:"check_precio",value:function(){this.offerForm.patchValue(this.inputPrecio.value<=20?{precio_valid:null}:{precio_valid:0,precio_valid2:0,precio_oferta:0})}},{key:"check_stock",value:function(){this.offerForm.patchValue(this.inputStock.value<=0?{stock_valid:null}:{stock_valid:0})}},{key:"transfCheck",value:function(){this.offerForm.patchValue({valid_transfer:null})}},{key:"back",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Alerta!",message:"\xbfEst\xe1 seguro?, Se perder\xe1n todos los datos agregados.",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Confirmar",cssClass:"secondary",handler:function(){t.router.navigateByUrl("/publicaciones-list"),t.offerForm.reset()}}]});case 2:return o=e.sent,e.next=5,o.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"convertFormat",value:function(e){return u(e).format("YYYYMMDD")}},{key:"increment",value:function(){this.stock++,this.offerForm.patchValue({stock:this.stock})}},{key:"decrement",value:function(){this.stock--,this.offerForm.patchValue({stock:this.stock})}},{key:"fecha_cupon_Si",value:function(){var e=this;this.fecha=!0,this.fecha_no=!1,setTimeout((function(){e.inputFecha.open()}),500)}},{key:"fecha_cupon_No",value:function(){this.offerForm.patchValue({fecha_fin:""}),this.fecha=!1,this.fecha_no=!0}},{key:"goToT",value:function(){this.router.navigateByUrl("transfer/"+this.commerce._id),this.storage.set("new_transf",{id:this.route.snapshot.params.id,tipo:"new"})}},{key:"goToMP",value:function(){window.open("https://www.mercadopago.com.ar/tools/create","_system")}},{key:"scrollTo",value:function(){this.content.scrollToPoint(0,580,1e3)}},{key:"cropImage",value:function(e){var o=this;this.crop.crop(e,this.cropOptions).then((function(e){o.showCroppedImage(e.split("?")[0])}),(function(e){}))}},{key:"showCroppedImage",value:function(e){var o=this;this.isLoading=!0;var t=e.split("/"),c=t[t.length-1],n=e.split(c)[0];this.file.readAsDataURL(n,c).then((function(e){return Object(l.a)(o,void 0,void 0,regeneratorRuntime.mark((function o(){var t=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(this.croppedImagepath=e,this.isLoading=!1,fetch(this.croppedImagepath).then((function(e){return e.blob()})).then((function(e){return Object(l.a)(t,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:this.photoSelected=this.croppedImagepath,this.croppedImage=e,this.offerForm.patchValue({img:c});case 1:case"end":return o.stop()}}),o,this)})))}))));case 1:case"end":return o.stop()}}),o,this)})))}),(function(e){alert("Error al mostrar la impagen"+e),o.isLoading=!1}))}},{key:"createOffer",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,t,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.presentLoading("Creando Publicaci\xf3n..."),!0===this.pesos&&this.offerForm.patchValue({precio_inicial:this.offerForm.get("precio_inicial").value,precio_final:this.offerForm.get("precio_final").value,oferta:"true"}),o=[],!0===this.offerForm.get("check_e").value&&o.push("efectivo"),this.offerForm.patchValue({pagos:o}),t=[],!0===this.offerForm.get("check_local").value&&t.push("comercio"),!0===this.offerForm.get("check_delivery").value&&t.push("delivery"),!0===this.offerForm.get("check_envio").value&&t.push("envio"),this.offerForm.patchValue({entrega:t}),e.next=10,this.productoService.createProducto(this.offerForm.value,this.croppedImage).then((function(e){return Object(l.a)(c,void 0,void 0,regeneratorRuntime.mark((function o(){var t=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(e),o.t0=e.producto,!o.t0){o.next=10;break}return o.next=5,this.loading.dismiss();case 5:return o.next=7,this.storage.set("addprod",e.producto._id);case 7:return setTimeout((function(){t.router.navigateByUrl("/publicaciones-list"),t.offerForm.reset()}),800),o.next=10,this.presentToast();case 10:case"end":return o.stop()}}),o,this)})))}));case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){this.pesos=!1,this.offerForm.patchValue({precio_inicial:"",precio_final:"",oferta:"false",porciento:null})}},{key:"checkBox",value:function(){var e=this,o=[];!0===this.offerForm.get("check_e").value&&o.push("efectivo"),!0===this.offerForm.get("check_t").value&&o.push("transferencia"),!0===this.offerForm.get("check_m").value?(o.push("mercadopago"),this.offerForm.get("link_mp").value?this.offerForm.patchValue({valid_mp:["ok"]}):(this.offerForm.patchValue({valid_mp:null}),setTimeout((function(){e.input_mp.setFocus()}),300))):this.offerForm.patchValue({valid_mp:["ok"]}),!1===this.offerForm.get("check_m").value&&this.offerForm.patchValue({link_mp:""}),this.offerForm.patchValue({pagos:o})}},{key:"checkBoxEntrega",value:function(){var e=[];!0===this.offerForm.get("check_local").value&&e.push("comercio"),!0===this.offerForm.get("check_delivery").value&&e.push("delivery"),!0===this.offerForm.get("check_envio").value&&e.push("envio"),this.offerForm.patchValue({entrega:e})}},{key:"oferta",value:function(){var e=this;this.inputToggle.checked?(this.pesos=!0,this.offerForm.patchValue({precio_inicial:this.offerForm.get("precio_final").value,precio_final:"",porciento:null}),setTimeout((function(){e.inputPrecioO.value>20&&(e.offerForm.patchValue({precio_valid2:0}),e.inputPrecioO.value=e.offerForm.get("precio_inicial").value),e.inputPromo.setFocus()}),300)):(this.pesos=!1,this.offerForm.patchValue({precio_inicial:"",precio_final:"",porciento:null}),setTimeout((function(){e.inputPrecio.setFocus()}),300)),"false"===this.offerForm.get("oferta").value&&this.offerForm.patchValue({oferta:"true"}),"true"===this.offerForm.get("oferta").value&&this.offerForm.patchValue({oferta:"false"})}},{key:"presentLoading",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.loadingController.create({message:e});case 2:return this.loading=o.sent,o.next=5,this.loading.present();case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}}),o,this)})))}}])&&o(c.prototype,n),i&&o(c,i),t}(),me.\u0275fac=function(e){return new(e||me)(f.Xb(p.a),f.Xb(d.a),f.Xb(m.a),f.Xb(g.a),f.Xb(s.bb),f.Xb(a.g),f.Xb(a.a),f.Xb(h.b),f.Xb(s.a),f.Xb(r.b),f.Xb(_.a),f.Xb(s.cb),f.Xb(s.Y),f.Xb(s.W),f.Xb(b.a),f.Xb(s.b),f.Xb(v.a))},me.\u0275cmp=f.Rb({type:me,selectors:[["app-producto-add"]],viewQuery:function(e,o){var t;1&e&&(f.Pc(s.p,!0),f.Pc(k,!0),f.Pc(x,!0),f.Pc(M,!0),f.Pc(F,!0),f.Pc(C,!0),f.Pc(y,!0),f.Pc(P,!0),f.Pc(O,!0),f.Pc(I,!0)),2&e&&(f.zc(t=f.mc())&&(o.content=t.first),f.zc(t=f.mc())&&(o.inputDesc=t.first),f.zc(t=f.mc())&&(o.inputToggle=t.first),f.zc(t=f.mc())&&(o.inputPromo=t.first),f.zc(t=f.mc())&&(o.inputPrecio=t.first),f.zc(t=f.mc())&&(o.inputPrecioO=t.first),f.zc(t=f.mc())&&(o.inputFecha=t.first),f.zc(t=f.mc())&&(o.input_mp=t.first),f.zc(t=f.mc())&&(o.input_t=t.first),f.zc(t=f.mc())&&(o.inputStock=t.first))},decls:10,vars:2,consts:[["color","primary"],["slot","start"],[3,"click"],["name","arrow-back","slot","icon-only"],["slot","end"],[4,"ngIf"],[1,"spinnerCenter"],["name","crescent","color","primary"],["novalidate","",3,"formGroup"],["size","12",1,"card_form"],["no-lines",""],["color","primary",1,"list_no_lines"],["color","danger",4,"ngIf"],["name","checkmark-circle","color","success","class","icon_check",4,"ngIf"],["name","reorder-two-sharp","color","primary",1,"icon_input"],["type","text","formControlName","nombre","autocapitalize","on","autoGrow","true","placeholder","Ej: Combo para el hogar","maxlength","35"],["input_t",""],["class","error",4,"ngIf"],["name","reorder-four-sharp","color","primary",1,"icon_input"],["type","text","formControlName","descripcion","autocapitalize","on","autoGrow","true","placeholder","describ\xed tu producto/servicio, NO incluyas datos de contacto.","maxlength","1000",1,"tare_des"],["input_desc",""],[1,"item_cat"],["position","floating","color","primary",1,"text_floating","font_seis"],["color","danger","class","text_cat",4,"ngIf"],["formControlName","categoria","multiple","true","cancelText","Cancelar","interface","alert",3,"interfaceOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"card_desc_img"],[1,"col_file","ion-text-center"],["type","file","id","seleccionArchivos","accept","image/*","hidden","","formControlName","img",1,"d-none",3,"change"],["photoInput",""],["shape","round","id","loadFileXml","value","loadXml","onclick","document.getElementById('seleccionArchivos').click();","color","primary",4,"ngIf"],["shape","round","color","primary",3,"click",4,"ngIf"],["class","col_img",4,"ngIf"],["class","div_br",4,"ngIf"],[1,"card_add"],["color","primary",1,"list_no_lines",3,"ngClass"],["class","ion-activatable",4,"ngIf"],["type","tel","pattern","\\d*","maxlength","4","minlength","1","value","offerForm.get('stock').value","formControlName","stock",1,"input_add",3,"ionChange"],["input_s",""],[1,"ion-activatable"],["type","bounded"],["name","add-circle","color","primary",1,"icon_add",3,"click"],["color","danger","class","error",4,"ngIf"],["name","search","color","primary",1,"icon_input"],["type","text","formControlName","etiquetas","autocapitalize","on","autoGrow","true","placeholder","palabras separadas por coma ( , ). relacionadas a esta publicaci\xf3n para que la encuentren m\xe1s facilmente","maxlength","80"],["shape","round","size","large","expand","block","class","btn_pub",3,"click",4,"ngIf"],["color","danger"],["name","checkmark-circle","color","success",1,"icon_check"],[1,"error"],["name","alert",1,"icon_error"],["color","danger",1,"text_cat"],[3,"value"],["shape","round","id","loadFileXml","value","loadXml","onclick","document.getElementById('seleccionArchivos').click();","color","primary"],["slot","start","name","image"],["shape","round","color","primary",3,"click"],[1,"col_img"],[1,"img_commerce_actual"],[1,"img_add","img_normal",3,"src"],[1,"div_br"],["src","/assets/icon/attach_money-24px.svg","color","primary",1,"icon_input"],["type","tel","maxlength","6","pattern","\\d*","formControlName","precio_final",3,"ionChange"],["input_precio",""],["color","danger",1,"error"],["type","tel","maxlength","6","pattern","\\d*","formControlName","precio_inicial",3,"ionChange"],["input_precio_con",""],["input_promo",""],["name","close","color","primary",1,"icon_input",3,"click"],["name","remove-circle","color","primary",1,"icon_add",3,"click"],["name","remove-circle","color","medium",1,"icon_add"],["shape","round","size","large","expand","block",1,"btn_pub",3,"click"],[1,"ion-text-center","pointer"],["color","primary",1,"icon_footer_t_p"]],template:function(e,o){1&e&&(f.dc(0,"ion-header"),f.dc(1,"ion-toolbar",0),f.dc(2,"ion-buttons",1),f.dc(3,"ion-button",2),f.lc("click",(function(){return o.back()})),f.Yb(4,"ion-icon",3),f.cc(),f.dc(5,"ion-title"),f.Lc(6,"Nueva Publicaci\xf3n"),f.cc(),f.cc(),f.Yb(7,"ion-buttons",4),f.cc(),f.cc(),f.Kc(8,w,3,0,"ion-content",5),f.Kc(9,de,90,28,"ion-content",5)),2&e&&(f.Mb(8),f.uc("ngIf","loading"==o.status),f.Mb(1),f.uc("ngIf","ok"===o.status))},directives:[s.s,s.T,s.i,s.h,s.t,s.R,i.l,s.p,s.G,s.M,r.t,r.m,r.e,s.r,s.o,s.j,s.z,s.y,s.w,s.v,s.fb,r.l,r.d,r.g,s.P,s.I,s.eb,i.k,r.a,i.j,r.p,r.h,s.E,s.O,s.J,s.Q,s.u],styles:[".img_add[_ngcontent-%COMP%]{margin-top:2rem;max-height:100px;max-width:180px;margin-bottom:1rem;min-width:180px;min-height:90px}.icon_view[_ngcontent-%COMP%]{vertical-align:middle}ion-col[_ngcontent-%COMP%]{padding:0!important}.spinner-crescent[_ngcontent-%COMP%]{color:#fff!important}.div_br[_ngcontent-%COMP%]{padding:1rem}.text_add_o[_ngcontent-%COMP%]{font-size:1.1rem}ion-item[_ngcontent-%COMP%]{--border-radius:0px}.first_icons[_ngcontent-%COMP%]{border-radius:15px;margin:.1rem}.activated_first[_ngcontent-%COMP%], .first_icons[_ngcontent-%COMP%]{background-color:#fff}.label_first[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.label_btn_first[_ngcontent-%COMP%]{font-size:12px}.ion-activatable[_ngcontent-%COMP%]{position:relative;overflow:hidden}.icon_add[_ngcontent-%COMP%]{font-size:35px}.input_add[_ngcontent-%COMP%]{text-align:center;font-size:20px}.col_file[_ngcontent-%COMP%]{margin-top:35px}.label_fecha[_ngcontent-%COMP%]{max-width:25px}.icon_pay[_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle}.col_img[_ngcontent-%COMP%]{margin-top:-60px}.img_ticket[_ngcontent-%COMP%]{height:150px;-o-object-fit:cover;object-fit:cover;width:100%}.cupon_ticket_card[_ngcontent-%COMP%], .cupon_ticket_last[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}.cupon_ticket_last[_ngcontent-%COMP%]{padding:.5rem}.text_cant[_ngcontent-%COMP%]{padding:.2rem}.btn_pub[_ngcontent-%COMP%]{border:2px solid #fff!important;border-radius:15px!important;margin:.5rem}.tare_des[_ngcontent-%COMP%]{min-height:140px;height:140px!important}.tarea_key[_ngcontent-%COMP%]{min-height:90px;height:90px!important}ion-grid[_ngcontent-%COMP%]{padding:0!important}.text_cat[_ngcontent-%COMP%]{font-weight:300}.icon_check[_ngcontent-%COMP%]{vertical-align:middle}.item_cat[_ngcontent-%COMP%]{margin-top:-.7rem}ion-card[_ngcontent-%COMP%]{border-radius:5px!important;margin:5px}.list_no_lines[_ngcontent-%COMP%]{font-size:16px;padding-left:1rem}.cantidad_desc_text[_ngcontent-%COMP%], .fecha_desc_text[_ngcontent-%COMP%]{color:#757575;font-size:11px}#cart-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background-color:#ff4500;border:.5px solid #fff;z-index:9}.icon_fecha[_ngcontent-%COMP%]{font-size:25px}.p_f[_ngcontent-%COMP%]{position:absolute;right:-2px;bottom:0}.text_commerce_desc[_ngcontent-%COMP%]{position:relative}.text_commerce_desc[_ngcontent-%COMP%], .text_desc[_ngcontent-%COMP%]{text-align:left;display:flex}.agotado[_ngcontent-%COMP%]{color:rgba(199,47,47,.924);padding-top:.2rem;padding-left:.2rem}.icon_input[_ngcontent-%COMP%]{font-size:25px;vertical-align:middle}.icon_error[_ngcontent-%COMP%]{font-size:15px;vertical-align:middle}.error[_ngcontent-%COMP%]{background-color:rgba(240,65,65,.92)}.error[_ngcontent-%COMP%], .text_success[_ngcontent-%COMP%]{color:#fff;padding:.2rem;font-weight:700;margin-top:-2px;display:block}.text_success[_ngcontent-%COMP%]{background-color:#4bba76}.item-interactive[_ngcontent-%COMP%], .item-lines-full[_ngcontent-%COMP%]{--border-width:0px!important}.icon_start_offer[_ngcontent-%COMP%]{-webkit-margin-end:12px!important;margin-inline-end:12px!important}.font_btn_add[_ngcontent-%COMP%]{text-transform:none;font-size:15px}.col_addmore[_ngcontent-%COMP%]{justify-content:center;display:grid}.icons_new_home[_ngcontent-%COMP%]{width:80px;height:80px}.icon_footer_t[_ngcontent-%COMP%]{padding:1rem;display:block}.icon_footer_t_p[_ngcontent-%COMP%]{padding:.6rem;display:block;color:#fff}.btn_examples[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:0;left:0;margin-left:auto;margin-right:auto;width:130px;height:30px}"]}),me)}],_e=((ge=function o(){e(this,o)}).\u0275mod=f.Vb({type:ge}),ge.\u0275inj=f.Ub({factory:function(e){return new(e||ge)},imports:[[i.b,r.f,r.q,s.U,a.i.forChild(he)]]}),ge)}}])}();