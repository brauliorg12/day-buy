!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{wDXw:function(t,i,o){"use strict";o.r(i),o.d(i,"LoginPageModule",(function(){return K}));var c=o("ofXK"),r=o("3Pt+"),a=o("tyNb"),s=o("TEn/"),l=o("mrSG"),u=o("fXoL"),f=o("on2l"),p=o("5egi"),d=o("e8h1");function g(n,e){1&n&&(u.dc(0,"ion-header"),u.dc(1,"ion-toolbar",2),u.dc(2,"ion-buttons",3),u.Yb(3,"ion-back-button",4),u.dc(4,"ion-title"),u.Lc(5,"Iniciar Sesi\xf3n"),u.cc(),u.cc(),u.cc(),u.cc())}function b(n,e){if(1&n){var t=u.ec();u.dc(0,"ion-icon",17),u.lc("click",(function(){return u.Dc(t),u.pc(3).changeTypeText()})),u.cc()}}function m(n,e){if(1&n){var t=u.ec();u.dc(0,"ion-icon",18),u.lc("click",(function(){return u.Dc(t),u.pc(3).changeTypePass()})),u.cc()}}function h(n,e){1&n&&(u.dc(0,"ion-button",19),u.Lc(1," Ingresar "),u.cc())}function y(n,e){1&n&&(u.dc(0,"ion-button",20),u.Lc(1," Ingresar "),u.cc())}function v(n,e){if(1&n){var t=u.ec();u.bc(0),u.dc(1,"form",6,7),u.lc("ngSubmit",(function(){u.Dc(t);var n=u.Ac(2);return u.pc(2).login(n)})),u.dc(3,"ion-row"),u.dc(4,"ion-col"),u.dc(5,"ion-list"),u.dc(6,"ion-item",8),u.dc(7,"ion-label",2),u.Lc(8,"Email: "),u.cc(),u.dc(9,"ion-input",9,10),u.lc("ngModelChange",(function(n){return u.Dc(t),u.pc(2).loginUser.email=n})),u.cc(),u.cc(),u.dc(11,"ion-item",8),u.dc(12,"ion-label",2),u.Lc(13,"Contrase\xf1a: "),u.cc(),u.dc(14,"ion-input",11),u.lc("ngModelChange",(function(n){return u.Dc(t),u.pc(2).loginUser.password=n})),u.cc(),u.Kc(15,b,1,0,"ion-icon",12),u.Kc(16,m,1,0,"ion-icon",13),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(17,"ion-row"),u.dc(18,"ion-col"),u.Kc(19,h,2,0,"ion-button",14),u.Kc(20,y,2,0,"ion-button",15),u.cc(),u.cc(),u.Yb(21,"br"),u.dc(22,"ion-button",16),u.lc("click",(function(){return u.Dc(t),u.pc(2).backNewL()})),u.dc(23,"ion-text"),u.Lc(24,"Volver"),u.cc(),u.cc(),u.cc(),u.ac()}if(2&n){var i=u.Ac(2),o=u.pc(2);u.Mb(9),u.uc("ngModel",o.loginUser.email),u.Mb(5),u.uc("type",o.passtype)("ngModel",o.loginUser.password),u.Mb(1),u.uc("ngIf","password"===o.passtype),u.Mb(1),u.uc("ngIf","text"===o.passtype),u.Mb(3),u.uc("ngIf",o.loginUser.email&&o.loginUser.password&&i.valid),u.Mb(1),u.uc("ngIf",!o.loginUser.email||!o.loginUser.password||!i.valid)}}function w(n,e){if(1&n){var t=u.ec();u.bc(0),u.dc(1,"ion-row"),u.dc(2,"ion-col"),u.dc(3,"ion-button",21),u.lc("click",(function(){return u.Dc(t),u.pc(3).registerNew()})),u.dc(4,"b"),u.Lc(5,"Registrarme"),u.cc(),u.cc(),u.cc(),u.cc(),u.ac()}}function x(n,e){if(1&n){var t=u.ec();u.bc(0),u.dc(1,"ion-row"),u.dc(2,"ion-col"),u.dc(3,"ion-button",16),u.lc("click",(function(){return u.Dc(t),u.pc(3).fbToLogin()})),u.dc(4,"ion-text",2),u.dc(5,"b"),u.Lc(6,"Iniciar sesi\xf3n"),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.ac()}}function k(n,e){if(1&n){var t=u.ec();u.bc(0),u.dc(1,"ion-row"),u.dc(2,"ion-col"),u.dc(3,"ion-button",22),u.lc("click",(function(){return u.Dc(t),u.pc(3).registerNew()})),u.dc(4,"ion-text",2),u.dc(5,"b"),u.Lc(6,"Registrarme"),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.dc(7,"ion-row"),u.dc(8,"ion-col"),u.dc(9,"ion-text",23),u.Lc(10,"\xbfYa ten\xe9s cuenta? "),u.dc(11,"ion-text",2),u.dc(12,"b",24),u.lc("click",(function(){return u.Dc(t),u.pc(3).fbToLogin()})),u.Lc(13,"Iniciar sesi\xf3n"),u.cc(),u.cc(),u.cc(),u.cc(),u.cc(),u.ac()}}function _(n,e){if(1&n&&(u.bc(0),u.Yb(1,"br"),u.Kc(2,w,6,0,"ng-container",0),u.Zb(3),u.Kc(4,x,7,0,"ng-container",0),u.Kc(5,k,14,0,"ng-container",0),u.ac()),2&n){var t=u.pc(2);u.Mb(2),u.uc("ngIf",t.web),u.Mb(2),u.uc("ngIf",t.web),u.Mb(1),u.uc("ngIf",!t.web)}}function M(n,e){if(1&n&&(u.dc(0,"div"),u.dc(1,"ion-grid",5),u.Kc(2,v,25,7,"ng-container",0),u.Kc(3,_,6,3,"ng-container",0),u.cc(),u.cc()),2&n){var t=u.pc();u.Mb(2),u.uc("ngIf","login"===t.fborlogin&&t.touchL),u.Mb(1),u.uc("ngIf","fb"===t.fborlogin&&!t.touchR&&!t.touchL)}}function C(n,e){if(1&n){var t=u.ec();u.dc(0,"ion-icon",17),u.lc("click",(function(){return u.Dc(t),u.pc(2).changeTypeText()})),u.cc()}}function O(n,e){if(1&n){var t=u.ec();u.dc(0,"ion-icon",18),u.lc("click",(function(){return u.Dc(t),u.pc(2).changeTypePass()})),u.cc()}}function P(n,e){1&n&&(u.dc(0,"ion-text",35),u.Lc(1,"\xa0 "),u.Yb(2,"ion-icon",36),u.Lc(3,"\xa0Las contrase\xf1as no coinciden "),u.cc())}function L(n,e){if(1&n){var t=u.ec();u.dc(0,"ion-button",37),u.lc("click",(function(){return u.Dc(t),u.pc(2).registro()})),u.Lc(1," Crear usuario "),u.cc()}}function R(n,e){1&n&&(u.dc(0,"ion-button",38),u.Lc(1," Crear usuario "),u.cc())}function I(n,e){if(1&n){var t=u.ec();u.dc(0,"div"),u.dc(1,"ion-grid"),u.dc(2,"form",25),u.dc(3,"ion-row"),u.dc(4,"ion-col"),u.dc(5,"ion-list"),u.dc(6,"ion-item",8),u.dc(7,"ion-label",26),u.Lc(8,"Email:"),u.cc(),u.Yb(9,"ion-input",27,28),u.cc(),u.dc(11,"ion-item",8),u.dc(12,"ion-label",26),u.Lc(13,"Nombre:"),u.cc(),u.Yb(14,"ion-input",29),u.cc(),u.dc(15,"ion-item",8),u.dc(16,"ion-label",26),u.Lc(17,"Contrase\xf1a:"),u.cc(),u.Yb(18,"ion-input",30),u.Kc(19,C,1,0,"ion-icon",12),u.Kc(20,O,1,0,"ion-icon",13),u.cc(),u.dc(21,"ion-item",8),u.dc(22,"ion-label",26),u.Lc(23,"Repetir Contrase\xf1a:"),u.cc(),u.Yb(24,"ion-input",31),u.cc(),u.Kc(25,P,4,0,"ion-text",32),u.cc(),u.cc(),u.cc(),u.Yb(26,"br"),u.dc(27,"ion-row"),u.dc(28,"ion-col"),u.Kc(29,L,2,0,"ion-button",33),u.Kc(30,R,2,0,"ion-button",34),u.cc(),u.cc(),u.Yb(31,"br"),u.dc(32,"ion-button",16),u.lc("click",(function(){return u.Dc(t),u.pc().backNewR()})),u.dc(33,"ion-text"),u.Lc(34,"Volver"),u.cc(),u.cc(),u.cc(),u.cc(),u.cc()}if(2&n){var i=u.pc();u.Mb(2),u.uc("formGroup",i.registerUser),u.Mb(16),u.uc("type",i.passtype),u.Mb(1),u.uc("ngIf","password"===i.passtype),u.Mb(1),u.uc("ngIf","text"===i.passtype),u.Mb(4),u.uc("type",i.passtype),u.Mb(1),u.uc("ngIf",i.registerUser.get("password_c").errors&&(i.registerUser.get("password_c").dirty||i.registerUser.get("password_c").touched)),u.Mb(4),u.uc("ngIf",i.registerUser.valid),u.Mb(1),u.uc("ngIf",!i.registerUser.valid)}}var U,z,D=[{path:"",component:(U=function(){function t(e,i,o,c,a,s,l,u){n(this,t),this.router=e,this.navCtrl=i,this.usuarioService=o,this.uiService=c,this.storage=a,this.formBuilder=s,this.platform=l,this.loadingController=u,this.loginUser={email:"",password:""},this.fborlogin="fb",this.userReady="false",this.passtype="password",this.isLoggedIn=!1,this.large=23232323,this.short=23,this.confirmp=!1,this.touchL=!1,this.touchR=!1,this.isGoogleLogin=!1,this.registerUser=this.formBuilder.group({_id:[""],email:["",r.s.required],nombre:["",r.s.required],password:new r.c("",r.s.compose([r.s.minLength(5),r.s.required])),password_c:["",[r.s.required,this.matchValues("password")]],avatar:["av-1.png"],role:["user"],fb:["false"]})}var i,o,c;return i=t,(o=[{key:"matchValues",value:function(n){return function(e){return e.parent&&e.parent.value&&e.value===e.parent.controls[n].value?null:{isMatching:!1}}}},{key:"ionViewWillEnter",value:function(){var n=this;this.storage.get("token").then((function(e){e?n.navCtrl.navigateRoot("/inicio",{animated:!0,animationDirection:"forward"}):n.userReady="false"}))}},{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.platform.is("capacitor")?this.platform.ready().then((function(){})):this.web=!0,n.next=3,this.loadingController.create({message:"Connecting ..."});case 3:this.loading=n.sent;case 4:case"end":return n.stop()}}),n,this)})))}},{key:"changeTypeText",value:function(){this.passtype="text"}},{key:"changeTypePass",value:function(){this.passtype="password"}},{key:"login",value:function(n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userReady="true",e.t0=n.invalid,e.t0){e.next=5;break}return e.next=5,this.usuarioService.login(this.loginUser.email,this.loginUser.password).then((function(n){return Object(l.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=4,this.storage.set("user",{fb:"false"}).then((function(n){t.user={fb:n.fb},t.navCtrl.navigateRoot("/inicio",{animated:!0,animationDirection:"forward"}),t.loginUser.email="",t.loginUser.password="",t.touchL=!1,t.fborlogin="fb"}),(function(n){}));case 4:this.userReady="ok",e.next=8;break;case 7:this.userReady="false",this.uiService.alertaInformativa("Usuario y contrase\xf1a no son correctos.");case 8:case"end":return e.stop()}}),e,this)})))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"registro",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.userReady="true",n.next=3,this.usuarioService.registro(this.registerUser.value).then((function(n){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=4,this.storage.set("user",{fb:"false"}).then((function(n){t.user={fb:n.fb},t.navCtrl.navigateRoot("/inicio",{animated:!0,animationDirection:"forward"}),t.registerUser.reset(),t.touchR=!1,t.fborlogin="fb"}),(function(n){}));case 4:this.userReady="ok",e.next=8;break;case 7:this.userReady="false",this.uiService.alertaInformativa("Ese correo electr\xf3nico ya existe.");case 8:case"end":return e.stop()}}),e,this)})))}));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"clicksWhatsapp",value:function(){window.location.href="whatsapp://send?text=Hola, tengo inconvenientes para entrar en CoDi.&phone=+5492364624963"}},{key:"fbToLogin",value:function(){var n=this;this.fborlogin="login",this.touchL=!0,setTimeout((function(){n.inputEmailL.setFocus()}),500)}},{key:"registerNew",value:function(){var n=this;this.fborlogin="login",this.touchR=!0,setTimeout((function(){n.inputEmailR.setFocus()}),500)}},{key:"backNewR",value:function(){this.fborlogin="fb",this.touchR=!1}},{key:"backNewL",value:function(){this.fborlogin="fb",this.touchL=!1}},{key:"loginToFb",value:function(){this.fborlogin="fb"}},{key:"openEmergency",value:function(){this.router.navigateByUrl("/main/tabs/emergencias")}}])&&e(i.prototype,o),c&&e(i,c),t}(),U.\u0275fac=function(n){return new(n||U)(u.Xb(a.g),u.Xb(s.Z),u.Xb(f.a),u.Xb(p.a),u.Xb(d.b),u.Xb(r.b),u.Xb(s.bb),u.Xb(s.W))},U.\u0275cmp=u.Rb({type:U,selectors:[["app-login"]],viewQuery:function(n,e){var t;1&n&&(u.Pc(s.v,!0),u.Pc(s.v,!0)),2&n&&(u.zc(t=u.mc())&&(e.inputEmailR=t.first),u.zc(t=u.mc())&&(e.inputEmailL=t.first))},decls:4,vars:3,consts:[[4,"ngIf"],[1,"ion-text-center"],["color","primary"],["slot","start"],["defaultHref","/tab/inicio"],[1,"grid_login"],[3,"ngSubmit"],["fLogin","ngForm"],["lines","inset"],["name","email","type","email","autocomplete","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",3,"ngModel","ngModelChange"],["inputEmailL",""],["name","password","autocomplete","current-password","required","",3,"type","ngModel","ngModelChange"],["name","eye-off-outline",3,"click",4,"ngIf"],["name","eye-outline",3,"click",4,"ngIf"],["type","submit","color","primary","fill","outline","shape","round",4,"ngIf"],["color","primary","fill","outline","shape","round","disabled","",4,"ngIf"],["fill","outline","shape","round",3,"click"],["name","eye-off-outline",3,"click"],["name","eye-outline",3,"click"],["type","submit","color","primary","fill","outline","shape","round"],["color","primary","fill","outline","shape","round","disabled",""],["icon-right","","fill","outline","shape","round","color","none","fill","outline",3,"click"],["fill","outline","shape","round","color","medium",3,"click"],[1,"text_login_y","pointer"],[3,"click"],["novalidate","",3,"formGroup"],["color","primary",1,"form_r"],["type","email","autocomplete","email","formControlName","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"],["inputEmailR",""],["type","text","formControlName","nombre","autocomplete","name","required","","autocapitalize","on"],["autocomplete","new-password","formControlName","password","required","",3,"type"],["autocomplete","new-password","formControlName","password_c","required","",3,"type"],["color","danger","class","error",4,"ngIf"],["type","submit","color","primary","shape","round",3,"click",4,"ngIf"],["type","submit","color","primary","shape","round","disabled","",4,"ngIf"],["color","danger",1,"error"],["name","alert",1,"icon_error"],["type","submit","color","primary","shape","round",3,"click"],["type","submit","color","primary","shape","round","disabled",""]],template:function(n,e){1&n&&(u.Kc(0,g,6,0,"ion-header",0),u.dc(1,"ion-content",1),u.Kc(2,M,4,2,"div",0),u.Kc(3,I,35,8,"div",0),u.cc()),2&n&&(u.uc("ngIf","false"===e.userReady),u.Mb(2),u.uc("ngIf","false"===e.userReady),u.Mb(1),u.uc("ngIf","false"===e.userReady&&e.touchR))},directives:[c.l,s.p,s.s,s.T,s.i,s.e,s.f,s.R,s.r,r.t,r.m,r.n,s.G,s.o,s.z,s.w,s.y,s.v,s.fb,r.r,r.p,r.l,r.o,s.h,s.O,s.t,r.e,r.d],styles:['.div_logo[_ngcontent-%COMP%]{display:flex;text-align:center}.text_codi[_ngcontent-%COMP%]{position:absolute;left:42%}.pick-avatar[_ngcontent-%COMP%]{width:80px;opacity:.3}.info_filter[_ngcontent-%COMP%]{font-size:17px;padding:.8rem;margin:1rem}.pick-avatar-seleccionado[_ngcontent-%COMP%]{transition:opacity .5s linear;opacity:1!important}.img_codi[_ngcontent-%COMP%]{width:80px;height:80px}.msg-content[_ngcontent-%COMP%]{float:left;position:relative;background:#0f4994;color:#fff;margin-top:1rem;border-radius:10px;padding:.3rem;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.msg-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{content:"";position:absolute;background:transparent;width:10px;height:8px;left:-10px;top:9px;box-sizing:border-box;border-right:10px solid #0f4994;border-top:8px solid transparent;border-bottom:8px solid transparent}.grid_login[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);width:100%}.icon_fb[_ngcontent-%COMP%]{color:#4267b2!important;margin-bottom:2rem;min-width:250px}.icon_go[_ngcontent-%COMP%]{color:#d54c3f!important;margin-top:1rem}.text_login_n[_ngcontent-%COMP%]{font-size:.7rem}.icon_error[_ngcontent-%COMP%]{font-size:13px;vertical-align:middle}.error[_ngcontent-%COMP%]{font-size:12px}.form_r[_ngcontent-%COMP%], .text_login[_ngcontent-%COMP%]{font-size:14px}.text_login_first[_ngcontent-%COMP%]{font-size:1.1rem;display:block}.text_login_second[_ngcontent-%COMP%]{font-size:1rem;display:block}.text_login_y[_ngcontent-%COMP%]{font-size:14px}.col_top[_ngcontent-%COMP%]{background-color:#f0f8ff}.icon_size_home[_ngcontent-%COMP%]{position:relative;width:35px;height:25px}.icon_text_login[_ngcontent-%COMP%]{font-size:13px}.pulse1[_ngcontent-%COMP%]{z-index:1;border:3px solid #4267b2;-webkit-animation:pulsejg1 3s linear infinite;animation:pulsejg1 3s linear infinite;border-radius:999px;box-shadow:inset 0 0 15px 10px #4267b2}.pulse1[_ngcontent-%COMP%], .pulse2[_ngcontent-%COMP%]{position:absolute;width:200px;height:200px;margin:auto;top:0;left:0;bottom:0;right:0;opacity:0;box-sizing:border-box}.pulse2[_ngcontent-%COMP%]{z-index:2;border:1px solid #1d28c2;-webkit-animation:pulsejg2 3s linear infinite;animation:pulsejg2 3s linear infinite;border-radius:999px;box-shadow:inset 0 0 12px 5px #4267b2}@-webkit-keyframes pulsejg1{0%{-webkit-transform:scale(.6);opacity:0}50%{-webkit-transform:scale(.6);opacity:0}60%{-webkit-transform:scale(.9);opacity:.2}70%{-webkit-transform:scale(1.1);opacity:.35}80%{-webkit-transform:scale(1.25);opacity:.2}to{-webkit-transform:scale(1.4);opacity:0}}@keyframes pulsejg1{0%{transform:scale(.6);opacity:0}50%{transform:scale(.6);opacity:0}60%{transform:scale(.9);opacity:.1}70%{transform:scale(1.1);opacity:.25}80%{transform:scale(1.25);opacity:.1}to{transform:scale(1.4);opacity:0}}@-webkit-keyframes pulsejg2{0%{-webkit-transform:scale(.6);opacity:0}40%{-webkit-transform:scale(.8);opacity:.05}50%{-webkit-transform:scale(1);opacity:.1}60%{-webkit-transform:scale(1.1);opacity:.3}80%{-webkit-transform:scale(1.2);opacity:.1}to{-webkit-transform:scale(1.3);opacity:0}}@keyframes pulsejg2{0%{transform:scale(.6);opacity:0}40%{transform:scale(.8);opacity:.05}50%{transform:scale(1);opacity:.1}60%{transform:scale(1.1);opacity:.3}80%{transform:scale(1.2);opacity:.1}to{transform:scale(1.3);opacity:0}}.divider_normal[_ngcontent-%COMP%]{min-height:1px}.divider[_ngcontent-%COMP%]{display:flex}.divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:"";flex:1}.line[_ngcontent-%COMP%]{align-items:center}.line[_ngcontent-%COMP%]:after, .line[_ngcontent-%COMP%]:before{height:1px;margin:0 1em}.one-line[_ngcontent-%COMP%]:after, .one-line[_ngcontent-%COMP%]:before{background:#b5b5b5}']}),U)}],K=((z=function e(){n(this,e)}).\u0275mod=u.Vb({type:z}),z.\u0275inj=u.Ub({factory:function(n){return new(n||z)},imports:[[c.b,r.f,s.U,r.q,a.i.forChild(D)]]}),z)}}])}();